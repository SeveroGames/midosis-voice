version: "3.1"

stories:
  # Story 1: Saludar y despedir
  - story: Saludo básico
    steps:
      - intent: saludar
      - action: utter_saludar
      - intent: despedir
      - action: utter_despedir

  # Story 2: Agregar medicamento COMPLETO (sin reglas conflictivas)
  - story: Agregar medicamento completo Mi Dosis
    steps:
      - intent: mi_dosis_agregar
        entities:
          - medicamento: "paracetamol"
          - dosis: "500 mg"
          - hora: "8 de la mañana"
          - frecuencia: "cada 12 horas"
          - duracion: "14 días"
      - action: action_mi_dosis_agregar
      - action: utter_mi_dosis_agregar
      - intent: agradecer
      - action: utter_agradecer

  # Story 3: Agregar medicamento PARCIAL (conversación guiada)
  - story: Agregar medicamento paso a paso
    steps:
      # Paso 1: Usuario pide agregar medicamento
      - intent: mi_dosis_agregar
        entities:
          - medicamento: "ibuprofeno"
          - dosis: "400 mg"
      - action: utter_pedir_hora
      
      # Paso 2: Usuario responde con hora
      - intent: programar_recordatorio
        entities:
          - hora: "a las 14:00"
      - action: utter_pedir_frecuencia
      
      # Paso 3: Usuario responde con frecuencia
      - intent: consultar_horario
        entities:
          - intervalo: "cada 8 horas"
      - action: utter_pedir_duracion
      
      # Paso 4: Usuario responde con duración
      - intent: mi_dosis_agregar
        entities:
          - duracion: "7 días"
      - action: action_mi_dosis_agregar
      - action: utter_mi_dosis_agregar

  # Story 4: Listar medicamentos
  - story: Listar medicamentos Mi Dosis
    steps:
      - intent: mi_dosis_listar
      - action: action_mi_dosis_listar
      - action: utter_mi_dosis_listar

  # Story 5: Eliminar medicamento
  - story: Eliminar medicamento Mi Dosis
    steps:
      - intent: mi_dosis_eliminar
        entities:
          - medicamento: "paracetamol"
      - action: action_mi_dosis_eliminar
      - action: utter_mi_dosis_eliminar
      - intent: agradecer
      - action: utter_agradecer

  # Story 6: Programar recordatorio (usando intent existente)
  - story: Programar recordatorio simple
    steps:
      - intent: programar_recordatorio
        entities:
          - medicamento: "metformina"
          - hora: "a las 8"
      - action: action_programar_recordatorio
      - action: utter_programar_recordatorio

  # Story 7: Consultar horario
  - story: Consultar horario medicamento
    steps:
      - intent: consultar_horario
        entities:
          - medicamento: "atorvastatina"
      - action: utter_consultar_horario

  # Story 8: Preguntar sobre medicamento
  - story: Preguntar información medicamento
    steps:
      - intent: preguntar_medicamento
        entities:
          - medicamento: "lisinopril"
      - action: utter_preguntar_medicamento

  # Story 9: Confirmar toma
  - story: Confirmar si tomó medicamento
    steps:
      - intent: confirmar_toma
      - action: utter_confirmar_toma
      - intent: afirmar
      - action: action_verificar_toma

  # Story 10: Negación
  - story: Respuesta negativa
    steps:
      - intent: negar
      - action: utter_default